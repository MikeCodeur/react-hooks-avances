# useLayoutEffect

### üí° Comprendre useLayoutEffect

## üìù Tes notes

Detaille ce que tu as appris ici
`src/exercise/04.md`ou¬†sur¬†une¬†page¬†[Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

`useLayoutEffect` et `useEffect` fonctionne de la m√™me mani√®re mais ne s'ex√©cute
pas dans la m√™me phase (cf hooks-flow). `useEffect` fonctionne de mani√®re
asynchrone apr√®s le rendu du navigateur. Tandis que `useLayoutEffect` va
s'ex√©cuter de mani√®re synchrone juste apr√®s le chargement du DOM mais avant le
rendu du navigateur. Mais pour √©viter de bloquer le chargement de la page, nous
devons toujours utiliser le hook `useEffect`.

```jsx
useLayoutEffect(() => {
  //...
}, [dependances])
```

üìë Le lien vers
[useLayoutEffect](https://fr.reactjs.org/docs/hooks-reference.html#uselayouteffect)

## Exercice

Dans cet exercice nous allons simuler un composant qui est lent √† l'affichage
pour simuler un composant complexe. Ce composant est bloquant pendant 2.5
secondes.

```jsx
function ComposantLent() {
  React.useEffect(() => {
    //longue action
    const end = Date.now() + 2500
    while (Date.now() < end) {}
  })
  return null
}
```

Nous avons √©galement un formulaire avec un bouton `submit` qui d√©clenche
l'action longue. Notre objectif est de remettre le focus sur le champs input
automatiquement apr√®s le clique sur le bouton (_qui nous fait perdre le focus_)

```jsx
const ref = React.useRef()

React.useEffect(() => {
  ref.current.focus()
})
```

Le comportement est un peu probl√©matique car avec `useEffect` on est oblig√©
d'attendre la fin du rendu global. (plus de 2.5 secondes) . Testons avec
`useLayoutEffect`

## üêú Feedback

Remplir le formulaire le
[formulaire de FeedBack.](https://go.mikecodeur.com/cours-react-avis?entry.1430994900=React%20Hooks%20Avanc√©s&entry.533578441=04%20useLayoutEffect)
