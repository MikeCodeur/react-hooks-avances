# useReducer : Alternative Ã  useState
### ğŸ’¡ Comprendre le Hook useReducer

## ğŸ“ Tes notes

Detaille ce que tu as appris ici `src/exercise/01.md`ouÂ surÂ uneÂ pageÂ [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

**1.Qu'est ce qu'un rÃ©ducteur (`reducer`) ?**

Un "rÃ©ducteur" est un mot compliquÃ© pour dire une fonction qui prend 2 valeurs et renvoie 1 valeur. Voyons avec la mÃ©thode `reduce` disponible sur `Array` qui prend en paramÃ¨tre un `reducer.`

```jsx
let numbers = [1, 2, 3];
const reducer = (total, number) => {
  return total + number;
}
let sum = numbers.reduce(reducer, 0);
```

`reduce` va parcourir chaque Ã©lÃ©ment du tableau et appliquer la fonction `reducer` avec la valeur prÃ©cÃ©dente (`return` ) et la valeur courante. ConcrÃ¨tent voila ce qu'il se passe dans notre cas. Le tableau contient 3 Ã©lÃ©ments `[1, 2, 3]`, le `reducer` sera appeler 3 fois. La valeur initial est Ã  0.

- 1er passage : `(0, 1`) retourne 1
- 2Ã¨me passage : `(1, 2)` retourne 3
- 3Ã¨me passage : `(3, 3)` retourne 6

**2.`useReducer` est plus ou moins le mÃªme mÃ©canisme appliquer Ã  des states.** 

```jsx
const [state, dispatch] = useReducer(reducer, initialArg, init);
```

La chose la plus importante avec le hook `useReducer` est le reducer. Il s'agit d'une fonction qui prend le `state` initial en entrÃ©e, une `action` et qui retourne un nouveau state. La signature est : `(state, action) => newStat`. 

ğŸ“‘ Le lien vers [useReducer](https://fr.reactjs.org/docs/hooks-reference.html#usereducer)

## Exercice

Dans ce premier exercice tu vas devoir reproduire le comportement du hook `useState` en utilisant `useReducer`. C'est Ã  dire que veut le mÃªme comportement sur ces 2 hooks.

```jsx
const [count, setCount] = React.useState(0);
setCount(1)
setCount(count + 1)
//et
const [count, setCount] = React.useReducer(reducer,0);
setCount(1)
setCount(count + 1)
```

Il va donc falloir se concentrer sur la fonction `reducer`

## Bonus

### 1. ğŸš€ Ajouter un type d'action

Dans cet exercice il va falloir utiliser l'`action` (le deuxiÃ¨me paramÃ¨tre du `reducer`) pour spÃ©cifier comment l'on veut compter. incrÃ©menter, dÃ©crÃ©menter, mettre Ã  zÃ©ro.  Pour cela on va passer en action un objet `{type: 'DECREMENT'}` ou `{type: 'INCREMENT'}` ou `{type: 'RESET'}`

```jsx
setCount({type: 'DECREMENT'})
setCount({type: 'INCREMENT'})
setCount({type: 'RESET'})
```

Dans cet exercice tu vas devoir implÃ©menter le `reducer` pour incrÃ©menter/ dÃ©crÃ©menter / mettre Ã  zÃ©ro le state en fonction du type de l'action. Utilise 3 boutons `input` pour tester les 3 actions avec `onClick={() => setCount({type: 'DECREMENT'})`

```jsx
const reducer = (state, action) => {
  // teste action.type
  // applique une opÃ©ration sur le state (incrÃ©mentation etc ...)
  // return le nouveau state 
  // ex : return state + 1
}
```

### 2. ğŸš€ Fonction disptach

Renommons `setCount` en `disptach`. c'est comme cela que l'on prÃ©sente souvent  le `useReducer`.

```jsx
const [count, dispatch] = React.useReducer(reducer, 0)
//...
onClick={() => dispatch({type: 'INCREMENT'})}
```

Nous voulons Ã©viter s'avoir Ã  rÃ©utiliser partour dans le code : `dispatch({type: 'INCREMENT'})`. Pour plus de clartÃ© du code il est possible de passer par une `fonction dispatch`.

```jsx
function increment() {
  dispatch({type: 'INCREMENT');
}
```

Dans cet exercice tu vas devoir crÃ©er et utiliser les 3 fonctions `disptach` 

- `increment()`
- `decrement()`
- `reset()`

### 3. ğŸš€ Payload data

Un cas d'utilisation frÃ©quent est de passer une valeur utile (`payload`). Par exemple si l'on veut incrÃ©menter de 10. exemple : `increment(10)`. Pour cela il suffit de mettre ce `payload` dans l'action `dispatch({type: 'INCREMENT', payload:10).` Dans cet exercice tu vas devoir gÃ©rer ce `payload` dans le `reducer` et les 3 fonctions.

```jsx
increment(10) //incrÃ©mente le compteur de 10
decrement(5) //dÃ©cremente le compteur de 5
reset() // reset
```

## Aller plus loin

ğŸ“‘ Le lien vers la doc [https://www.w3schools.com/html/html_css.asp](https://www.w3schools.com/html/html_css.asp)

## ğŸœ Feedback

Remplir le formulaire le [formulaire de FeedBack](https://go.mikecodeur.com/cours-react-avis).